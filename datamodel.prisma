type User @db(name: "person") {
  id: ID! @id
  createdAt: DateTime! @createdAt
  email: String! @unique
  name: String
  role: AuthRole @default(value: USER)
  profile: Profile @relation(link: INLINE)
  id_proof: IdProof
}

type IdProof {
  id: ID! @id
  ssn: [SSN!]!
  email: [Email!]!
  phone_number: [PhoneNumber!]!
}

type Profile @db(name: "profile") {
  id: ID! @id
  user: User!
  bio: String!
}

type SSN @db(name: "ssn") {
  id: ID! @id
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  owner: User!
}

type Email @db(name: "email") {
  id: ID! @id
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  owner: User!
  attribute: [Attribute!]! @relation(link: TABLE, name: "EmailAttribute")
}

type PhoneNumber @db(name: "phone_number") {
  id: ID! @id
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  owner: User!
  attribute: [Attribute!]! @relation(link: TABLE, name: "PhoneNumberAttribute")
}

type Attribute @db(name: "attribute") {
  id: ID! @id
  attr_type: String!
  ssn: [SSN!]! @relation(name: "SSNAttribute")
  email: [Email!]! @relation(name: "EmailAttribute")
  phone_number: [PhoneNumber!]! @relation(name: "PhoneNumberAttribute")
}

type SSNAttribute @db(name: "ssn_attribute") @relationTable {
  ssn: SSN
  attribute: Attribute
}

type EmailAttribute @db(name: "email_attribute") @relationTable {
  email: Email
  attribute: Attribute
}

type PhoneNumberAttribute @db(name: "phone_number_attribute") @relationTable {
  phone_number: PhoneNumber
  attribute: Attribute
}

enum AuthRole {
  BLACKLISTED
  PROSPECT
  USER
  ADMIN
}