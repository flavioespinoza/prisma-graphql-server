type User @db(name: "person") {
  id: ID! @id
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  email: String! @unique
  name: String
  role: AuthLevel @default(value: USER)
  gender: Gender 
  identifiers: Identifiers
}

type Identifiers {
  id: ID! @id
  tax_id: [TaxId!]!
  email: [Email!]!
  phone_number: [PhoneNumber!]!
}

type TaxId @db(name: "tax_id") {
  id: ID! @id
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  owner: User!
	attribute: [Attribute!]! @relation(link: TABLE, name: "TaxIdAttribute")
}

type Email @db(name: "email") {
  id: ID! @id
	value: String!
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  owner: User!
  attribute: [Attribute!]! @relation(link: TABLE, name: "EmailAttribute")
}

type PhoneNumber @db(name: "phone_number") {
  id: ID! @id
	value: Int 
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  owner: User!
  attribute: [Attribute!]! @relation(link: TABLE, name: "PhoneNumberAttribute")
}

type Attribute @db(name: "attribute") {
  id: ID! @id
  attr_type: String!
  tax_id: [TaxId!]! @relation(name: "TaxIdAttribute")
  email: [Email!]! @relation(name: "EmailAttribute")
  phone_number: [PhoneNumber!]! @relation(name: "PhoneNumberAttribute")
}

type TaxIdAttribute @db(name: "tax_id_attribute") @relationTable {
  tax_id: TaxId
  attribute: Attribute
}

type EmailAttribute @db(name: "email_attribute") @relationTable {
  email: Email
  attribute: Attribute
}

type PhoneNumberAttribute @db(name: "phone_number_attribute") @relationTable {
  phone_number: PhoneNumber
  attribute: Attribute
}


enum Gender {
  M: Male
	F: Female
}

type Female @db(name: "female") {
	id: ID! @id
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  owner: User!
	attribute: [Attribute!]! @relation(link: TABLE, name: "FemaleAttribute")
}

type Male @db(name: "male") {
	id: ID! @id
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  owner: User!
	attribute: [Attribute!]! @relation(link: TABLE, name: "MaleAttribute")
}


enum AuthLevel {
  ADMIN
  USER
  PROSPECT
  BLACKLISTED
}
